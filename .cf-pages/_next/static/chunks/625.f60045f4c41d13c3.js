(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{4052:(e,t,r)=>{var n=0/0,a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,u="object"==typeof self&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),d=Object.prototype.toString,h=Math.max,g=Math.min,m=function(){return f.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==d.call(t))return n;if(p(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=p(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var l=o.test(e);return l||s.test(e)?c(e.slice(2),l?2:8):i.test(e)?n:+e}e.exports=function(e,t,r){var n,a,i,o,s,c,l=0,u=!1,f=!1,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var r=n,i=a;return n=a=void 0,l=t,o=e.apply(i,r)}function b(e){var r=e-c,n=e-l;return void 0===c||r>=t||r<0||f&&n>=i}function w(){var e,r,n,a=m();if(b(a))return E(a);s=setTimeout(w,(e=a-c,r=a-l,n=t-e,f?g(n,i-r):n))}function E(e){return(s=void 0,d&&n)?y(e):(n=a=void 0,o)}function j(){var e,r=m(),i=b(r);if(n=arguments,a=this,c=r,i){if(void 0===s)return l=e=c,s=setTimeout(w,t),u?y(e):o;if(f)return s=setTimeout(w,t),y(c)}return void 0===s&&(s=setTimeout(w,t)),o}return t=v(t)||0,p(r)&&(u=!!r.leading,i=(f="maxWait"in r)?h(v(r.maxWait)||0,t):i,d="trailing"in r?!!r.trailing:d),j.cancel=function(){void 0!==s&&clearTimeout(s),l=0,n=c=a=s=void 0},j.flush=function(){return void 0===s?o:E(m())},j}},5625:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r(5155),a=r(2115),i=r(4052),o=r.n(i),s=r(9509);let c={apiToken:s.env.REACT_APP_WEBFLOW_API_TOKEN||"YOUR_WEBFLOW_API_TOKEN",siteId:s.env.REACT_APP_WEBFLOW_SITE_ID||"YOUR_SITE_ID",collectionId:s.env.REACT_APP_WEBFLOW_COLLECTION_ID||"YOUR_COLLECTION_ID",apiBaseUrl:"https://api.webflow.com",searchFields:["name","description","category"]},l=[],u=0,f=!1,d=[],h=(e,t)=>{d.forEach(r=>{e?r.reject(e):r.resolve(t)}),d=[],f=!1},g=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Date.now();if(!e&&l.length>0&&t-u<3e5)return l;if(f)return new Promise((e,t)=>{d.push({resolve:e,reject:t})});f=!0;try{let e=await fetch("".concat(c.apiBaseUrl,"/collections/").concat(c.collectionId,"/items"),{headers:{"accept-version":"1.0.0",authorization:"Bearer ".concat(c.apiToken),"content-type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error("Webflow API error (".concat(e.status,"): ").concat(t.msg||e.statusText))}let t=(await e.json()).items.map(e=>({id:e._id,name:e.name||"",category:e.category||"",slug:e.slug||"",...e}));return l=t,u=Date.now(),h(null,t),t}catch(e){if(console.error("Error fetching from Webflow:",e),h(e,null),l.length>0&&"AbortError"===e.name)return console.warn("Request timed out, using cached data"),l;throw e}},m=async e=>{if(!e||!e.trim())return[];try{let t=await g(),r=e.toLowerCase().trim().split(/\s+/);return t.filter(e=>r.every(t=>c.searchFields.some(r=>String(e[r]||"").toLowerCase().includes(t))))}catch(t){if(console.error("Error searching items:",t),l.length>0){console.warn("Using cached items for search due to error");let t=e.toLowerCase().trim();return l.filter(e=>c.searchFields.some(r=>e[r]&&String(e[r]).toLowerCase().includes(t)))}throw t}},p=e=>{let{className:t=""}=e,[r,i]=(0,a.useState)(""),[s,c]=(0,a.useState)([]),[l,u]=(0,a.useState)(!1),[f,d]=(0,a.useState)(null),[h,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{u(!0),await m(""),g(!0)}catch(e){console.error("Initialization error:",e),d("Failed to initialize search. Please refresh the page.")}finally{u(!1)}})()},[]);let p=(0,a.useMemo)(()=>o()(async e=>{if(!e.trim())return void c([]);if(h){u(!0),d(null);try{let t=await m(e);c(t)}catch(e){console.error("Error fetching suggestions:",e),d("Failed to fetch suggestions. Please try again.")}finally{u(!1)}}},300),[h]);(0,a.useEffect)(()=>()=>{p.cancel()},[p]);let v=e=>{i(e.name),c([]),console.log("Selected:",e)};return(0,n.jsxs)("div",{className:"predictive-search ".concat(t),children:[(0,n.jsxs)("div",{className:"search-container",children:[(0,n.jsx)("input",{type:"text",value:r,onChange:e=>{let{value:t}=e.target;i(t),p(t)},placeholder:"Search products...",className:"search-input","aria-label":"Search products","aria-busy":l,"aria-describedby":f?"search-error":void 0}),l&&(0,n.jsx)("div",{className:"loading",children:"Loading..."}),f&&(0,n.jsx)("div",{id:"search-error",className:"error",children:f})]}),r&&!l&&(0,n.jsx)("div",{className:"suggestions-container",children:s.length>0?(0,n.jsx)("ul",{className:"suggestions-list",children:s.map(e=>(0,n.jsxs)("li",{className:"suggestion-item",onClick:()=>v(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),v(e))},tabIndex:0,role:"button","aria-label":"Select ".concat(e.name),children:[(0,n.jsx)("div",{className:"suggestion-name",children:e.name}),e.category&&(0,n.jsx)("div",{className:"suggestion-category",children:e.category})]},e._id))}):r?(0,n.jsxs)("div",{className:"no-results",children:['No results found for "',r,'"']}):null})]})}}}]);